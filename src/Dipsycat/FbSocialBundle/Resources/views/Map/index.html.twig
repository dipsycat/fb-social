{% extends 'DipsycatFbSocialBundle::layout.html.twig' %}
{% block title %}
    Map
{% endblock %}
{% block wrapper %}
    {{ parent() }}
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Map</h1>
        </div>
        <div class="col-md-9">
            {{ ivory_google_map(map) }}
            {{ ivory_google_api([map]) }}
        </div>
        <div class="col-md-3">
            <form method="post" action="{{ path('dipsycat_fb_social_map') }}" id="search-claims">
                <div class="form-group">
                    <label>Status</label>
                    <select multiple="multiple" class="form-control" name="status[]">
                        <option>Open</option>
                        <option>In progress</option>
                        <option>Closed</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="hidden" id="start" value="{{ data.dateStart }}" />
                    <input type="hidden" id="end" value="{{ data.dateEnd }}" />
                    <label>Date start</label>
                    <div class="input-group date" id="dateStart">
                        <input type="text" class="form-control" name="date-start" />
                        
                        <span class="input-group-addon">
                            <i class="fa fa-calendar fa-fw"></i>
                        </span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Date end</label>
                    <div class="input-group input-append date" id="dateEnd">
                        <input type="text" class="form-control" name="date-end" value="" />
                        <input type="hidden" value="{{ data.dateEnd }}" />
                        <span class="input-group-addon">
                            <i class="fa fa-calendar fa-fw"></i>
                        </span>
                    </div>
                </div>
                <button type="submit" class="btn btn-default">Search</button>
            </form>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script>
        $(function () {
            var nowDate = new Date();
            $('#dateStart').datetimepicker(
                    {
                        format: 'YYYY-MM-DD',
                        maxDate: nowDate
                    }
            );
            $('#dateEnd').datetimepicker(
                    {
                        format: 'YYYY-MM-DD',
                        maxDate: nowDate
                    }
            );
            var dateEndValue = $('#end').val();
            var dateStartValue = $('#start').val();
            $('#dateStart').data('DateTimePicker').date(new Date(dateStartValue));
            $('#dateEnd').data('DateTimePicker').date(new Date(dateEndValue));
        });
    </script>
{% endblock %}
